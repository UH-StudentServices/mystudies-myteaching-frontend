<!--
  ~ This file is part of MystudiesMyteaching application.
  ~
  ~ MystudiesMyteaching application is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ MystudiesMyteaching application is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with MystudiesMyteaching application.  If not, see <http://www.gnu.org/licenses/>.
-->

<ul class="banner-content">
  <li ng-repeat="workExperienceItem in workExperience track by workExperienceItem.id"
      class="editable">
    <div class="banner-content__item work-experience">
      <div class="banner-content__banner">
        <div class="banner-content__backdrop">
          <div class="banner-content__banner-content">
            <div class="banner-content__banner-title">
              <span class="banner-content__editable-content" ng-show="!workExperienceItem.employerEdit">
                <a role="button" href="" ng-click="editEmployer(workExperienceItem)"
                   class="banner-content__editable-content-button"
                   ng-class="{'ng-invalid':workExperienceItem.submitted && !workExperienceItem.employer}">
                  {{ (workExperienceItem.employer || ('workExperience.employerPlaceholder' | translate)) }}
                  <i class="hy hy-edit-event"></i>
                </a>
              </span>
              <span class="banner-content__editable-content--active" ng-show="workExperienceItem.employerEdit">
                <input focus="workExperienceItem.employerEdit"
                       ng-model="workExperienceItem.employer"
                       ui-keypress="{'enter':'exitEmployerEdit(workExperienceItem)'}"
                       ng-change="refreshValidity()"
                       ng-class="{'ng-invalid':!workExperienceItem.employer}"
                       placeholder="{{:: 'workExperience.employerPlaceholder' | translate }}" />
                <a role="button" href="" ng-click="exitEmployerEdit(workExperienceItem)"><i class="hy hy-done"></i></a>
              </span>
            </div>
            <div class="banner-content__banner-text">
              <span class="banner-content__editable-content" ng-show="!workExperienceItem.startDateEdit">
                <a role="button" href="" ng-click="editStartDate(workExperienceItem)"
                   class="banner-content__editable-content-button"
                   ng-class="{'ng-invalid':!workExperienceItem.startDate || !workExperienceItem.startDate.isValid()}">
                  {{ (workExperienceItem.startDate ? (workExperienceItem.startDate | momentFormat:'M/YYYY') :
                  ('workExperience.startDatePlaceholder' | translate)) }}
                  <i class="hy hy-edit-event"></i>
                </a>
              </span>
              <span class="banner-content__editable-content--active" ng-if="workExperienceItem.startDateEdit">
                <input focus="workExperienceItem.startDateEdit"
                       date-input="MM/YYYY" ng-model="workExperienceItem.startDate"
                       ui-keypress="{'enter':'exitStartDateEdit(workExperienceItem)'}"
                       ng-change="refreshValidity()"
                       ng-class="{'ng-invalid':!workExperienceItem.startDate || !workExperienceItem.startDate.isValid()}"
                       placeholder="{{:: ('workExperience.startDatePlaceholder' | translate) }}" />
                <a role="button" href="" ng-click="exitStartDateEdit(workExperienceItem)"><i class="hy hy-done"></i></a>
              </span>
              -
              <span class="banner-content__editable-content" ng-show="!workExperienceItem.endDateEdit">
                <a role="button" href="" ng-click="editEndDate(workExperienceItem)"
                   class="banner-content__editable-content-button"
                   ng-class="{'ng-invalid':workExperienceItem.endDate && !workExperienceItem.endDate.isValid()}">
                  {{ (workExperienceItem.endDate ? (workExperienceItem.endDate | momentFormat:'M/YYYY') :
                  ('workExperience.endDatePlaceholder' | translate)) }}
                  <i class="hy hy-edit-event"></i>
                </a>
              </span>
              <span class="banner-content__editable-content--active" ng-if="workExperienceItem.endDateEdit">
                <input focus="workExperienceItem.endDateEdit"
                       date-input="MM/YYYY" ng-model="workExperienceItem.endDate"
                       ui-keypress="{'enter':'exitEndDateEdit(workExperienceItem)'}"
                       ng-change="refreshValidity()"
                       ng-class="{'ng-invalid':workExperienceItem.endDate && !workExperienceItem.endDate.isValid()}"
                       placeholder="{{:: ('workExperience.endDatePlaceholder' | translate) }}" />
                <a role="button" href="" ng-click="exitEndDateEdit(workExperienceItem)"><i class="hy hy-done"></i></a>
              </span>
            </div>
          </div>
        </div>
      </div>
      <div class="banner-content__details-container">
        <div class="work-experience__title">
          <span class="banner-content__editable-content" ng-show="!workExperienceItem.jobTitleEdit">
            <a role="button" href="" ng-click="editJobTitle(workExperienceItem)"
               class="banner-content__editable-content-button"
               ng-class="{'ng-invalid':workExperienceItem.submitted && !workExperienceItem.jobTitle}">
              {{ workExperienceItem.jobTitle || ('workExperience.jobTitlePlaceholder' | translate)}}
              <i class="hy hy-edit-event"></i>
            </a>
          </span>
          <span class="banner-content__editable-content--active" ng-show="workExperienceItem.jobTitleEdit">
            <input focus="workExperienceItem.jobTitleEdit"
                   ng-model="workExperienceItem.jobTitle"
                   ui-keypress="{'enter':'exitJobTitleEdit(workExperienceItem)'}"
                   ng-change="refreshValidity()"
                   ng-class="{'ng-invalid':!workExperienceItem.jobTitle}"
                   placeholder="{{::'workExperience.jobTitlePlaceholder'|translate}}" />
            <a role="button" href="" ng-click="exitJobTitleEdit(workExperienceItem)"><i class="hy hy-done"></i></a>
          </span>
        </div>
        <div class="banner-content__description">
          <textarea placeholder="{{::'workExperience.descriptionPlaceholder'|translate}}"
                    ng-model="workExperienceItem.text" ></textarea>
        </div>
        <div class="banner-content__details-row">
          <span class="banner-content__editable-content" ng-show="!workExperienceItem.employerUrlEdit">
            <a role="button" href="" ng-click="editEmployerUrl(workExperienceItem)"
               class="banner-content__editable-content-button">
              {{workExperienceItem.employerUrl || ('workExperience.employerUrlPlaceholder' | translate)}}
              <i class="hy hy-edit-event"></i>
            </a>
          </span>
          <span class="banner-content__editable-content--active" ng-show="workExperienceItem.employerUrlEdit">
            <input focus="workExperienceItem.employerUrlEdit"
                   ng-model="workExperienceItem.employerUrl"
                   ui-keypress="{'enter':'exitEmployerUrlEdit(workExperienceItem)'}"
                   placeholder="{{::'workExperience.employerUrlPlaceholder'|translate}}" />
            <a role="button" href="" ng-click="exitEmployerUrlEdit(workExperienceItem)"><i class="hy hy-done"></i></a>
          </span>
        </div>
      </div>
      <button class="banner-content__remove" ng-click="removeWorkExperience(workExperienceItem)"></button>
    </div>
  </li>

  <li ng-show="jobSearch" class="editable">
    <div class="banner-content__item job-search">
      <div class="banner-content__banner">
        <div class="banner-content__backdrop">
          <div class="banner-content__banner-content">
            <div class="banner-content__banner-title" translate="workExperience.jobSearch" />
            <div class="banner-content__banner-text">
              {{jobSearch.contactEmail}}
            </div>
          </div>
        </div>
      </div>
      <div class="banner-content__details-container">
        <div class="work-experience__title">
          <span class="banner-content__editable-content" ng-show="!editJobSearchHeadline">
            <a role="button" href="" ng-click="enterJobHeadlineEdit()"
               class="banner-content__editable-content-button">
              {{jobSearch.headline}}
              <i class="hy hy-edit-event"></i>
            </a>
          </span>
          <span class="banner-content__editable-content--active" ng-show="editJobSearchHeadline">
            <input focus="editJobSearchHeadline" ng-model="jobSearch.headline"
                   ui-keypress="{'enter':'exitJobHeadlineEdit()'}" />
            <a role="button" href="" ng-click="exitJobHeadlineEdit()"><i class="hy hy-done"></i></a>
          </span>
        </div>
        <div class="banner-content__description">
          <textarea placeholder="{{::'workExperience.descriptionPlaceholder'|translate}}"
                    ng-model="jobSearch.text"></textarea>
        </div>
        <div class="banner-content__details-row">
          <span class="banner-content__editable-content" ng-show="!editContactEmail">
            <a role="button" href="" ng-click="enterContactEmailEdit()"
               class="banner-content__editable-content-button"
               ng-class="{'ng-invalid':jobSearch.submitted && !jobSearch.contactEmail}">
              {{jobSearch.contactEmail || ('workExperience.contactEmail' | translate)}}
              <i class="hy hy-edit-event"></i>
            </a>
          </span>
          <span class="banner-content__editable-content--active" ng-show="editContactEmail">
            <input focus="editContactEmail"
                   type="email" required
                   ng-model="jobSearch.contactEmail"
                   ui-keypress="{'enter':'exitContactEmailEdit()'}"
                   ng-class="{'ng-invalid':!jobSearch.contactEmail}"
                   placeholder="{{::'workExperience.contactEmail'|translate}}" />
            <a role="button" href="" ng-click="exitContactEmailEdit()"><i class="hy hy-done"></i></a>
          </span>
        </div>
      </div>
      <button class="banner-content__remove" ng-click="removeJobSearch()"></button>
    </div>
  </li>
</ul>

<div class="add-new-content">
  <div class="list-of-links">
    <a role="button" href="" class="button--action icon--plus" ng-click="addWorkExperience(newJob)">
      {{::('workExperience.addWorkExperience' | translate)}}
    </a>
    <a role="button" href="" class="button--action icon--plus" ng-click="addJobSearch(newJobSearch)" ng-hide="jobSearch">
      {{::('workExperience.addJobSearch' | translate)}}
    </a>
  </div>
</div>
